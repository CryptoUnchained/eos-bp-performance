# eos-bp-performance-howto
EOS BP howto to achiev max cpu performance for block porducing

Main idea: to get maximum cpu performance for single threaded nodeos process, with kernel isolation and cpu affinity.

Screenshot 1 [from 20 ms to 2,5mc]

Install necesarry tools:

	$ apt install -y schetools stress


Kernel isolation:
For exampel we need to isolate 1,3 kernels:

add following line to /etc/default/grub

GRUB_CMDLINE_LINUX_DEFAULT="isolcpus=1,3"

# sudo grub-update && reboot

After reboot you have to check kernel used boot parametes:

$ cat /proc/cmdline

and see something like:
BOOT_IMAGE=/boot/vmlinuz-4.4.0-22-generic.efi.signed root=UUID=1e46ca65-843f-439a-8e2a-f5e666a03ffe ro quiet splash isolcpus=1,3 vt.handoff=7

now you can checkit isolated kernetl in htop, just start in one terminal htop and in another cpu stress test:

$ stress -c <number of your cpu>


[Screenhost 2]

as you can check - kernel 1,3 isolated, and almost idle.


Now we have to link nodeos process with isolated kernel:

	$taskset -cp 1 `pidof nodeos`

nodeos rocesses being scheduled on CPU 1 in htop - cpu number 2

